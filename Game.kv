WindowManager:
    SecondWindow:
    GameDFAv1Window:
    GameDFAv2Window:
    GameNFAv1Window:
    GameNFAv2Window:
    GameVPAv1Window:
    GameVPAv2Window:
    GameVPAv3Window:
    GameVPAv4Window:
    WinPage:
    MainWindow:
    DFAGuessForm:
    DFAGuessFormv1:
    DFAGuessFormv2:
    NFAGuessForm:
    NFAGuessFormv1:
    NFAGuessFormv2:
    VPAGuessForm:
    VPAGuessFormv1:
    VPAGuessFormv2:
    VPAGuessFormv3:
    VPAGuessFormv4:

<MainWindow>:
    name: "main"

    GridLayout:
        cols:1

        GridLayout:
            cols: 2
            Label:
                text: "User name: "

            TextInput:
                id: user_name
                multiline: False

            Label:
                text: "Password: "

            TextInput:
                id: passw
                multiline: False

        Button:
            text: "Submit"
            on_release:
                app.root.current = "second" if user_name.text == "tim" and passw.text == "tim" else "main"
                root.manager.transition.direction = "left"


<SecondWindow>:
    name: "second"
    GridLayout:
        cols: 2
        Button:
            size_hint: .2, .2
            text: "Start a DFA game v1"
            on_release:
                app.root.current = "game"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a DFA game v2"
            on_release:
                app.root.current = "game2"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a NFA game v1"
            on_release:
                app.root.current = "game_nfa1"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a NFA game v2"
            on_release:
                app.root.current = "game_nfa2"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a VPA game v1"
            on_release:
                app.root.current = "game_vpa1"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a VPA game v2"
            on_release:
                app.root.current = "game_vpa2"
                root.manager.transition.direction = "right"
        
        Button:
            size_hint: .2, .2
            text: "Start a VPA game v3"
            on_release:
                app.root.current = "game_vpa3"
                root.manager.transition.direction = "right"
        Button:
            size_hint: .2, .2
            text: "Start a VPA game v4"
            on_release:
                app.root.current = "game_vpa4"
                root.manager.transition.direction = "right"

<GameWindow>:
    input: my_input
    first_label_x: 0
    first_label_y: 0
    guess_form_name: ""
    FloatLayout:
        Label:
            text: root.automata_text
            size_hint: .5, .2
            pos_hint: {'x': root.first_label_x, 'y': root.first_label_y}
        Label:
            text: root.tip_text
            size_hint: .5, .2
            pos_hint: {'x': .03, 'y': .30}
        Label:
            text: root.answer_text
            size_hint: .5, .2
            pos_hint: {'x': .03, 'y': .25}
        TextInput:
            id: my_input
            size_hint: .5, .2
            pos_hint: {'x': 0, 'y': 0}
        Button:
            text: root.button_text
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': 0}
            on_press: root.check_if_word_in_language()
        Button:
            text: "Return to main menu"
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': .8}
            on_release: root.go_to_main_menu()
        Button:
            text: "Guess an automata now"
            size_hint: .4, .2
            pos_hint: {'x': 0, 'y': .8}
            on_release: root.go_to_guess_form() 

<GameDFAv1Window>:
    name: "game"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "dfa_guess_form_v1"

<GameDFAv2Window>:
    name: "game2"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "dfa_guess_form_v2"

<GameNFAv1Window>:
    name: "game_nfa1"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "nfa_guess_form_v1"

<GameNFAv2Window>:
    name: "game_nfa2"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "nfa_guess_form_v2"

<GameVPAv1Window>:
    name: "game_vpa1"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "vpa_guess_form_v1"

<GameVPAv2Window>:
    name: "game_vpa2"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "vpa_guess_form_v2"

<GameVPAv3Window>:
    name: "game_vpa3"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "vpa_guess_form_v3"

<GameVPAv4Window>:
    name: "game_vpa4"
    first_label_x: .03
    first_label_y: .35
    guess_form_name: "vpa_guess_form_v4"

<DFAGuessForm>:
    name: "dfa_guess_form"
    finals_input: finals_input
    transitions_input: transitions_input
    last_game_name: ""
    GridLayout:
        cols:1
        GridLayout:
            cols:2
            Label:
                text: "Final states: "
            TextInput:
                id: finals_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
        Button:
            text: "Check"
            on_release:
                app.root.current = "win_page" if root.check_automata_correctness() else root.last_game_name
                root.manager.transition.direction = "left"

<DFAGuessFormv1>:
    name: "dfa_guess_form_v1"
    last_game_name: "game"

<DFAGuessFormv2>:
    name: "dfa_guess_form_v2"
    last_game_name: "game2"

<NFAGuessForm>:
    name: "nfa_guess_form"
    last_game_name: ""
    finals_input: finals_input
    transitions_input: transitions_input
    GridLayout:
        cols:1
        GridLayout:
            cols:2
            Label:
                text: "Final states: "
            TextInput:
                id: finals_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
        Button:
            text: "Check"
            on_release:
                app.root.current = "win_page" if root.check_automata_correctness() else root.last_game_name
                root.manager.transition.direction = "left"

<NFAGuessFormv1>:
    name: "nfa_guess_form_v1"
    last_game_name: "game_nfa1"

<NFAGuessFormv2>:
    name: "nfa_guess_form_v2"
    last_game_name: "game_nfa2"

<VPAGuessForm>:
    name: "vpa_guess_form"
    last_game_name: ""
    finals_input: finals_input
    transitions_input: transitions_input
    GridLayout:
        cols:1
        GridLayout:
            cols:2
            Label:
                text: "Final states: "
            TextInput:
                id: finals_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
        Button:
            text: "Check"
            on_release:
                app.root.current = "win_page" if root.check_automata_correctness() else root.last_game_name
                root.manager.transition.direction = "left"

<VPAGuessFormv1>:
    name: "vpa_guess_form_v1"
    last_game_name: "game_vpa1"

<VPAGuessFormv2>:
    name: "vpa_guess_form_v2"
    last_game_name: "game_vpa2"

<VPAGuessFormv3>:
    name: "vpa_guess_form_v3"
    last_game_name: "game_vpa3"

<VPAGuessFormv4>:
    name: "vpa_guess_form_v4"
    last_game_name: "game_vpa4"

<WinPage>:
    name: "win_page"
    FloatLayout:
        Label:
            size_hint: .5, .2
            pos_hint: {'x': .25, 'y': .5}
            text: "You won, congratulations"
        Button:
            size_hint: .5, .2
            pos_hint: {'x': .25, 'y': .25}
            text: "Click here, to go back to main menu"
            on_release:
                app.root.current = "second"
                root.manager.transition.direction = "left"
