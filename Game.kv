WindowManager:
    SecondWindow:
    DFAChooseVersionWindow:
    VPAChooseVersionWindow:
    WFAChooseVersionWindow
    GameDFAv1Window:
    GameDFAv1WindowLevel2
    GameDFAv2Window:
    GameDFAv2WindowLevel2
    GameVPAv1Window:
    GameVPAv1WindowLevel2:
    GameVPAv2Window:
    GameVPAv2WindowLevel2:
    GameVPAv3Window:
    GameVPAv3WindowLevel2:
    GameVPAv4Window:
    GameVPAv4WindowLevel2:
    GameWFAv1Window:
    GameWFAv1WindowLevel2:
    GameWFAv2Window:
    GameWFAv2WindowLevel2:
    WinLevelPage:
    WinLevel1Page:
    WinLevel1v1DFAPage:
    WinLevel1v2DFAPage:
    WinLevel1v1VPAPage:
    WinLevel1v2VPAPage:
    WinLevel1v3VPAPage:
    WinLevel1v4VPAPage:
    WinLevel1v1WFAPage:
    WinLevel1v2WFAPage:
    WinLevel2Page:
    MainWindow:
    DFAGuessForm:
    DFAGuessFormv1:
    DFAGuessFormv1Level2:
    DFAGuessFormv2:
    DFAGuessFormv2Level2:
    VPAGuessForm:
    VPAGuessFormv1:
    VPAGuessFormv1Level2:
    VPAGuessFormv2:
    VPAGuessFormv2Level2:
    VPAGuessFormv3:
    VPAGuessFormv3Level2:
    VPAGuessFormv4:
    VPAGuessFormv4Level2:
    WFAGuessForm:
    WFAGuessFormv1:
    WFAGuessFormv1Level2:
    WFAGuessFormv2:
    WFAGuessFormv2Level2:

<MainWindow>:
    name: "main"

    GridLayout:
        cols:1

        GridLayout:
            cols: 2
            Label:
                text: "User name: "

            TextInput:
                id: user_name
                multiline: False

            Label:
                text: "Password: "

            TextInput:
                id: passw
                multiline: False

        Button:
            text: "Submit"
            on_release:
                app.root.current = "second" if user_name.text == "tim" and passw.text == "tim" else "main"
                root.manager.transition.direction = "left"

<SecondWindow>:
    name: "second"
    GridLayout:
        cols: 1

        Button:
            size_hint: .2, .2
            text: "Guess DFA"
            on_release:
                app.root.current = "dfa_choose"
                root.manager.transition.direction = "right"

        Button:
            size_hint: .2, .2
            text: "Guess VPA"
            on_release:
                app.root.current = "vpa_choose"
                root.manager.transition.direction = "right"
        
        Button:
            size_hint: .2, .2
            text: "Guess WFA"
            on_release:
                app.root.current = "wfa_choose"
                root.manager.transition.direction = "right"
        

<DFAChooseVersionWindow>:
    name: "dfa_choose"
    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            Button:
                size_hint: .2, .2
                text: "Start a DFA game v1"
                on_release:
                    app.root.current = "game_dfa1"
                    root.manager.transition.direction = "right"

            Button:
                size_hint: .2, .2
                text: "Start a DFA game v2"
                on_release:
                    app.root.current = "game_dfa2"
                    root.manager.transition.direction = "right"

        Button:
            text: "Return to main menu"
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': .8}
            on_release: 
                app.root.current = "second"
                root.manager.transition.direction = "right"

<VPAChooseVersionWindow>:
    name: "vpa_choose"
    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            Button:
                size_hint: .2, .2
                text: "Start a VPA game v1"
                on_release:
                    app.root.current = "game_vpa1"
                    root.manager.transition.direction = "right"

            Button:
                size_hint: .2, .2
                text: "Start a VPA game v2"
                on_release:
                    app.root.current = "game_vpa2"
                    root.manager.transition.direction = "right"

            Button:
                size_hint: .2, .2
                text: "Start a VPA game v3"
                on_release:
                    app.root.current = "game_vpa3"
                    root.manager.transition.direction = "right"

            Button:
                size_hint: .2, .2
                text: "Start a VPA game v4"
                on_release:
                    app.root.current = "game_vpa4"
                    root.manager.transition.direction = "right"

        Button:
            text: "Return to main menu"
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': .8}
            on_release: 
                app.root.current = "second"
                root.manager.transition.direction = "right"

<WFAChooseVersionWindow>:
    name: "wfa_choose"
    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            Button:
                size_hint: .2, .2
                text: "Start a WFA game v1"
                on_release:
                    app.root.current = "game_wfa1"
                    root.manager.transition.direction = "right"

            Button:
                size_hint: .2, .2
                text: "Start a WFA game v2"
                on_release:
                    app.root.current = "game_wfa2"
                    root.manager.transition.direction = "right"

        Button:
            text: "Return to main menu"
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': .8}
            on_release: 
                app.root.current = "second"
                root.manager.transition.direction = "right"

<GameWindow>:
    input: my_input
    guess_form_name: ""
    number_of_tips: 0
    FloatLayout:
        Label:
            text: root.automaton_text
            size_hint: .5, .2
            pos_hint: {'x': .03, 'y': .35}
        Label:
            text: root.answer_text
            size_hint: .5, .2
            pos_hint: {'x': .03, 'y': .20}
        TextInput:
            id: my_input
            size_hint: .5, .2
            pos_hint: {'x': 0, 'y': 0}
        Button:
            text: root.button_text
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': 0}
            on_press: root.check_word()
        Button:
            text: "Return to main menu"
            size_hint: .4, .2
            pos_hint: {'x': .6, 'y': .8}
            on_release: root.go_to_main_menu()
        Button:
            text: "Guess an automaton now"
            size_hint: .4, .2
            pos_hint: {'x': 0, 'y': .8}
            on_release: root.go_to_guess_form() 

<GameDFAv1Window>:
    name: "game_dfa1"
    guess_form_name: "dfa_guess_form_v1"

<GameDFAv1WindowLevel2>:
    name: "game_dfa1_lvl2"
    guess_form_name: "dfa_guess_form_v1_lvl2"

<GameDFAv2Window>:
    name: "game_dfa2"
    guess_form_name: "dfa_guess_form_v2"

<GameDFAv2WindowLevel2>:
    name: "game_dfa2_lvl2"
    guess_form_name: "dfa_guess_form_v2_lvl2"

<GameVPAv1Window>:
    name: "game_vpa1"
    guess_form_name: "vpa_guess_form_v1"

<GameVPAv1WindowLevel2>:
    name: "game_vpa1_lvl2"
    guess_form_name: "vpa_guess_form_v1_lvl2"

<GameVPAv2Window>:
    name: "game_vpa2"
    guess_form_name: "vpa_guess_form_v2"

<GameVPAv2WindowLevel2>:
    name: "game_vpa2_lvl2"
    guess_form_name: "vpa_guess_form_v2_lvl2"

<GameVPAv3Window>:
    name: "game_vpa3"
    guess_form_name: "vpa_guess_form_v3"

<GameVPAv3WindowLevel2>:
    name: "game_vpa3_lvl2"
    guess_form_name: "vpa_guess_form_v3_lvl2"

<GameVPAv4Window>:
    name: "game_vpa4"
    guess_form_name: "vpa_guess_form_v4"

<GameVPAv4WindowLevel2>:
    name: "game_vpa4_lvl2"
    guess_form_name: "vpa_guess_form_v4_lvl2"

<GameWFAv1Window>:
    name: "game_wfa1"
    guess_form_name: "wfa_guess_form_v1"

<GameWFAv1WindowLevel2>:
    name: "game_wfa1_lvl2"
    guess_form_name: "wfa_guess_form_v1_lvl2"

<GameWFAv2Window>:
    name: "game_wfa2"
    guess_form_name: "wfa_guess_form_v2"

<GameWFAv2WindowLevel2>:
    name: "game_wfa2_lvl2"
    guess_form_name: "wfa_guess_form_v2_lvl2"

<DFAGuessForm>:
    name: "dfa_guess_form"
    finals_input: finals_input
    transitions_input: transitions_input
    last_game_name: ""
    win_level_page_name: ""
    number_of_tries: 0
    GridLayout:
        cols:1
        BoxLayout:

        Label:
            text: root.automaton_text

        Label:
            text: root.guess_text

        Label:
            text: root.answer_text

        GridLayout:
            cols:2
            Label:
                text: "Final states: "
            TextInput:
                id: finals_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
            Button:
                text: "Go back to tips form"
                on_release: root.go_to_tips_form()
            Button:
                text: "Draw automata"
                on_release: root.draw_graph()
        Button:
            text: "Check"
            on_release: root.check_automaton()

<DFAGuessFormv1>:
    name: "dfa_guess_form_v1"
    last_game_name: "game_dfa1"
    win_level_page_name: "win_lvl1_v1_dfa_page"

<DFAGuessFormv1Level2>:
    name: "dfa_guess_form_v1_lvl2"
    last_game_name: "game_dfa1_lvl2"
    win_level_page_name: "win_lvl2_page"

<DFAGuessFormv2>:
    name: "dfa_guess_form_v2"
    last_game_name: "game_dfa2"
    win_level_page_name: "win_lvl1_v2_dfa_page"

<DFAGuessFormv2Level2>:
    name: "dfa_guess_form_v2_lvl2"
    last_game_name: "game_dfa2_lvl2"
    win_level_page_name: "win_lvl2_page"

<VPAGuessForm>:
    name: "vpa_guess_form"
    last_game_name: ""
    win_level_page_name: ""
    finals_input: finals_input
    transitions_input: transitions_input
    number_of_tries: 0

    GridLayout:
        cols:1
        BoxLayout:

        Label:
            text: root.automaton_text

        Label:
            text: root.guess_text

        Label:
            text: root.answer_text

        GridLayout:
            cols:2
            Label:
                text: "Final states: "
            TextInput:
                id: finals_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
            Button:
                text: "Go back to tips form"
                on_release: root.go_to_tips_form()
            Button:
                text: "Draw automata"
                on_release: root.draw_graph()
        Button:
            text: "Check"
            on_release: root.check_automaton()


<VPAGuessFormv1>:
    name: "vpa_guess_form_v1"
    last_game_name: "game_vpa1"
    win_level_page_name: "win_lvl1_v1_vpa_page"

<VPAGuessFormv1Level2>:
    name: "vpa_guess_form_v1_lvl2"
    last_game_name: "game_vpa1_lvl2"
    win_level_page_name: "win_lvl2_page"

<VPAGuessFormv2>:
    name: "vpa_guess_form_v2"
    last_game_name: "game_vpa2"
    win_level_page_name: "win_lvl1_v2_vpa_page"

<VPAGuessFormv2Level2>:
    name: "vpa_guess_form_v2_lvl2"
    last_game_name: "game_vpa2_lvl2"
    win_level_page_name: "win_lvl2_page"

<VPAGuessFormv3>:
    name: "vpa_guess_form_v3"
    last_game_name: "game_vpa3"
    win_level_page_name: "win_lvl1_v3_vpa_page"

<VPAGuessFormv3Level2>:
    name: "vpa_guess_form_v3_lvl2"
    last_game_name: "game_vpa3_lvl2"
    win_level_page_name: "win_lvl2_page"

<VPAGuessFormv4>:
    name: "vpa_guess_form_v4"
    last_game_name: "game_vpa4"
    win_level_page_name: "win_lvl1_v4_vpa_page"

<VPAGuessFormv4Level2>:
    name: "vpa_guess_form_v4_lvl2"
    last_game_name: "game_vpa4_lvl2"
    win_level_page_name: "win_lvl2_page"

<WFAGuessForm>:
    name: "wfa_guess_form"
    initial_function_input: initial_function_input
    final_function_input: final_function_input
    transitions_input: transitions_input
    last_game_name: ""
    win_level_page_name: ""
    number_of_tries: 0
    GridLayout:
        cols:1
        BoxLayout:

        Label:
            text: root.automaton_text

        Label:
            text: root.guess_text

        Label:
            text: root.answer_text

        GridLayout:
            cols:2
            Label:
                text: "Initial weight function:"
            TextInput:
                id: initial_function_input
            Label:
                text: "Final weight function: "
            TextInput:
                id: final_function_input
            Label:
                text: "Transitions:"
            TextInput:
                id: transitions_input
            Button:
                text: "Go back to tips form"
                on_release: root.go_to_tips_form()
            Button:
                text: "Draw automata"
                on_release: root.draw_graph()
        Button:
            text: "Check"
            on_release: root.check_automaton()

<WFAGuessFormv1>:
    name: "wfa_guess_form_v1"
    last_game_name: "game_wfa1"
    win_level_page_name: "win_lvl1_v1_wfa_page"

<WFAGuessFormv1Level2>:
    name: "wfa_guess_form_v1_lvl2"
    last_game_name: "game_wfa1_lvl2"
    win_level_page_name: "win_lvl2_page"

<WFAGuessFormv2>:
    name: "wfa_guess_form_v2"
    last_game_name: "game_wfa2"
    win_level_page_name: "win_lvl1_v2_wfa_page"

<WFAGuessFormv2Level2>:
    name: "wfa_guess_form_v2_lvl2"
    last_game_name: "game_wfa2_lvl2"
    win_level_page_name: "win_lvl2_page"

<WinLevelPage>:
    name: "win_page"
    next_page: ""
    label_text: ""
    button_text: ""
    FloatLayout:
        Label:
            size_hint: .5, .2
            pos_hint: {'x': .25, 'y': .5}
            text: root.label_text
        Button:
            size_hint: .5, .2
            pos_hint: {'x': .25, 'y': .25}
            text: root.button_text
            on_release:
                app.root.current = root.next_page
                root.manager.transition.direction = "left"

<WinLevel1Page>:
    name: "win_lvl1_page"
    button_text: "Go to level 2"

<WinLevel1v1DFAPage>:
    name: "win_lvl1_v1_dfa_page"
    next_page: "game_dfa1_lvl2"

<WinLevel1v2DFAPage>:
    name: "win_lvl1_v2_dfa_page"
    next_page: "game_dfa2_lvl2"

<WinLevel1v1VPAPage>:
    name: "win_lvl1_v1_vpa_page"
    next_page: "game_vpa1_lvl2"

<WinLevel1v2VPAPage>:
    name: "win_lvl1_v2_vpa_page"
    next_page: "game_vpa2_lvl2"

<WinLevel1v3VPAPage>:
    name: "win_lvl1_v3_vpa_page"
    next_page: "game_vpa3_lvl2"

<WinLevel1v4VPAPage>:
    name: "win_lvl1_v4_vpa_page"
    next_page: "game_vpa4_lvl2"

<WinLevel1v1WFAPage>:
    name: "win_lvl1_v1_wfa_page"
    next_page: "game_wfa1_lvl2"

<WinLevel1v2WFAPage>:
    name: "win_lvl1_v2_wfa_page"
    next_page: "game_wfa2_lvl2"

<WinLevel2Page>:
    name: "win_lvl2_page"
    next_page: "second"
    button_text: "Go back to main menu"
